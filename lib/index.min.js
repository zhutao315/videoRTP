"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var es_object_toString=Object.freeze({__proto__:null}),ceil=Math.ceil,floor=Math.floor,toInteger=function(e){return isNaN(e=+e)?0:(0<e?floor:ceil)(e)},requireObjectCoercible=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},createMethod=function(c){return function(e,t){var r,n,o=String(requireObjectCoercible(e)),i=toInteger(t),a=o.length;return i<0||a<=i?c?"":void 0:(r=o.charCodeAt(i))<55296||56319<r||i+1===a||(n=o.charCodeAt(i+1))<56320||57343<n?c?o.charAt(i):r:c?o.slice(i,i+2):n-56320+(r-55296<<10)+65536}},stringMultibyte={codeAt:createMethod(!1),charAt:createMethod(!0)},commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}function getCjsExportFromNamespace(e){return e&&e.default||e}var check=function(e){return e&&e.Math==Math&&e},global_1=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof commonjsGlobal&&commonjsGlobal)||Function("return this")(),fails=function(e){try{return!!e()}catch(e){return!0}},descriptors=!fails(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),isObject=function(e){return"object"==typeof e?null!==e:"function"==typeof e},document$1=global_1.document,EXISTS=isObject(document$1)&&isObject(document$1.createElement),documentCreateElement=function(e){return EXISTS?document$1.createElement(e):{}},ie8DomDefine=!descriptors&&!fails(function(){return 7!=Object.defineProperty(documentCreateElement("div"),"a",{get:function(){return 7}}).a}),anObject=function(e){if(!isObject(e))throw TypeError(String(e)+" is not an object");return e},toPrimitive=function(e,t){if(!isObject(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!isObject(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!isObject(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!isObject(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},nativeDefineProperty=Object.defineProperty,f=descriptors?nativeDefineProperty:function(e,t,r){if(anObject(e),t=toPrimitive(t,!0),anObject(r),ie8DomDefine)try{return nativeDefineProperty(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e},objectDefineProperty={f:f},createPropertyDescriptor=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},createNonEnumerableProperty=descriptors?function(e,t,r){return objectDefineProperty.f(e,t,createPropertyDescriptor(1,r))}:function(e,t,r){return e[t]=r,e},setGlobal=function(t,r){try{createNonEnumerableProperty(global_1,t,r)}catch(e){global_1[t]=r}return r},SHARED="__core-js_shared__",store=global_1[SHARED]||setGlobal(SHARED,{}),sharedStore=store,functionToString=Function.toString;"function"!=typeof sharedStore.inspectSource&&(sharedStore.inspectSource=function(e){return functionToString.call(e)});var store$1,wmget,wmhas,wmset,set,get,has$1,STATE,inspectSource=sharedStore.inspectSource,WeakMap=global_1.WeakMap,nativeWeakMap="function"==typeof WeakMap&&/native code/.test(inspectSource(WeakMap)),hasOwnProperty={}.hasOwnProperty,has=function(e,t){return hasOwnProperty.call(e,t)},isPure=!0,shared=createCommonjsModule(function(e){(e.exports=function(e,t){return sharedStore[e]||(sharedStore[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:"pure",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})}),id=0,postfix=Math.random(),uid=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++id+postfix).toString(36)},keys=shared("keys"),sharedKey=function(e){return keys[e]||(keys[e]=uid(e))},hiddenKeys={},WeakMap$1=global_1.WeakMap,enforce=function(e){return has$1(e)?get(e):set(e,{})},getterFor=function(r){return function(e){var t;if(!isObject(e)||(t=get(e)).type!==r)throw TypeError("Incompatible receiver, "+r+" required");return t}};has$1=nativeWeakMap?(store$1=new WeakMap$1,wmget=store$1.get,wmhas=store$1.has,wmset=store$1.set,set=function(e,t){return wmset.call(store$1,e,t),t},get=function(e){return wmget.call(store$1,e)||{}},function(e){return wmhas.call(store$1,e)}):(STATE=sharedKey("state"),hiddenKeys[STATE]=!0,set=function(e,t){return createNonEnumerableProperty(e,STATE,t),t},get=function(e){return has(e,STATE)?e[STATE]:{}},function(e){return has(e,STATE)});var IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator,internalState={set:set,get:get,has:has$1,enforce:enforce,getterFor:getterFor},nativePropertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1),f$1=NASHORN_BUG?function(e){var t=getOwnPropertyDescriptor(this,e);return!!t&&t.enumerable}:nativePropertyIsEnumerable,objectPropertyIsEnumerable={f:f$1},toString={}.toString,classofRaw=function(e){return toString.call(e).slice(8,-1)},split="".split,indexedObject=fails(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==classofRaw(e)?split.call(e,""):Object(e)}:Object,toIndexedObject=function(e){return indexedObject(requireObjectCoercible(e))},nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,f$2=descriptors?nativeGetOwnPropertyDescriptor:function(e,t){if(e=toIndexedObject(e),t=toPrimitive(t,!0),ie8DomDefine)try{return nativeGetOwnPropertyDescriptor(e,t)}catch(e){}if(has(e,t))return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(e,t),e[t])},objectGetOwnPropertyDescriptor={f:f$2},replacement=/#|\.prototype\./,isForced=function(e,t){var r=data[normalize(e)];return r==POLYFILL||r!=NATIVE&&("function"==typeof t?fails(t):!!t)},normalize=isForced.normalize=function(e){return String(e).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P",isForced_1=isForced,path={},aFunction=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},functionBindContext=function(n,o,e){if(aFunction(n),void 0===o)return n;switch(e){case 0:return function(){return n.call(o)};case 1:return function(e){return n.call(o,e)};case 2:return function(e,t){return n.call(o,e,t)};case 3:return function(e,t,r){return n.call(o,e,t,r)}}return function(){return n.apply(o,arguments)}},getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,wrapConstructor=function(n){function e(e,t,r){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(e);case 2:return new n(e,t)}return new n(e,t,r)}return n.apply(this,arguments)}return e.prototype=n.prototype,e},_export=function(e,t){var r,n,o,i,a,c,s,u,l=e.target,p=e.global,f=e.stat,d=e.proto,y=p?global_1:f?global_1[l]:(global_1[l]||{}).prototype,h=p?path:path[l]||(path[l]={}),g=h.prototype;for(o in t)r=!isForced_1(p?o:l+(f?".":"#")+o,e.forced)&&y&&has(y,o),a=h[o],r&&(c=e.noTargetGet?(u=getOwnPropertyDescriptor$1(y,o))&&u.value:y[o]),i=r&&c?c:t[o],r&&typeof a==typeof i||(s=e.bind&&r?functionBindContext(i,global_1):e.wrap&&r?wrapConstructor(i):d&&"function"==typeof i?functionBindContext(Function.call,i):i,(e.sham||i&&i.sham||a&&a.sham)&&createNonEnumerableProperty(s,"sham",!0),h[o]=s,d&&(has(path,n=l+"Prototype")||createNonEnumerableProperty(path,n,{}),path[n][o]=i,e.real&&g&&!g[o]&&createNonEnumerableProperty(g,o,i)))},toObject=function(e){return Object(requireObjectCoercible(e))},correctPrototypeGetter=!fails(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),IE_PROTO=sharedKey("IE_PROTO"),ObjectPrototype=Object.prototype,objectGetPrototypeOf=correctPrototypeGetter?Object.getPrototypeOf:function(e){return e=toObject(e),has(e,IE_PROTO)?e[IE_PROTO]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ObjectPrototype:null},nativeSymbol=!!Object.getOwnPropertySymbols&&!fails(function(){return!String(Symbol())}),useSymbolAsUid=nativeSymbol&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,WellKnownSymbolsStore=shared("wks"),Symbol$1=global_1.Symbol,createWellKnownSymbol=useSymbolAsUid?Symbol$1:Symbol$1&&Symbol$1.withoutSetter||uid,wellKnownSymbol=function(e){return has(WellKnownSymbolsStore,e)||(nativeSymbol&&has(Symbol$1,e)?WellKnownSymbolsStore[e]=Symbol$1[e]:WellKnownSymbolsStore[e]=createWellKnownSymbol("Symbol."+e)),WellKnownSymbolsStore[e]},ITERATOR=wellKnownSymbol("iterator"),BUGGY_SAFARI_ITERATORS=!1;[].keys&&("next"in(arrayIterator=[].keys())?(PrototypeOfArrayIteratorPrototype=objectGetPrototypeOf(objectGetPrototypeOf(arrayIterator)))!==Object.prototype&&(IteratorPrototype=PrototypeOfArrayIteratorPrototype):BUGGY_SAFARI_ITERATORS=!0),null==IteratorPrototype&&(IteratorPrototype={});var activeXDocument,iteratorsCore={IteratorPrototype:IteratorPrototype,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS},min=Math.min,toLength=function(e){return 0<e?min(toInteger(e),9007199254740991):0},max=Math.max,min$1=Math.min,toAbsoluteIndex=function(e,t){var r=toInteger(e);return r<0?max(r+t,0):min$1(r,t)},createMethod$1=function(c){return function(e,t,r){var n,o=toIndexedObject(e),i=toLength(o.length),a=toAbsoluteIndex(r,i);if(c&&t!=t){for(;a<i;)if((n=o[a++])!=n)return!0}else for(;a<i;a++)if((c||a in o)&&o[a]===t)return c||a||0;return!c&&-1}},arrayIncludes={includes:createMethod$1(!0),indexOf:createMethod$1(!1)},indexOf=arrayIncludes.indexOf,objectKeysInternal=function(e,t){var r,n=toIndexedObject(e),o=0,i=[];for(r in n)!has(hiddenKeys,r)&&has(n,r)&&i.push(r);for(;t.length>o;)has(n,r=t[o++])&&(~indexOf(i,r)||i.push(r));return i},enumBugKeys=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],objectKeys=Object.keys||function(e){return objectKeysInternal(e,enumBugKeys)},objectDefineProperties=descriptors?Object.defineProperties:function(e,t){anObject(e);for(var r,n=objectKeys(t),o=n.length,i=0;i<o;)objectDefineProperty.f(e,r=n[i++],t[r]);return e},aFunction$1=function(e){return"function"==typeof e?e:void 0},getBuiltIn=function(e,t){return arguments.length<2?aFunction$1(path[e])||aFunction$1(global_1[e]):path[e]&&path[e][t]||global_1[e]&&global_1[e][t]},html=getBuiltIn("document","documentElement"),GT=">",LT="<",PROTOTYPE="prototype",SCRIPT="script",IE_PROTO$1=sharedKey("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(e){return LT+SCRIPT+GT+e+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(e){e.write(scriptTag("")),e.close();var t=e.parentWindow.Object;return e=null,t},NullProtoObjectViaIFrame=function(){var e,t=documentCreateElement("iframe"),r="java"+SCRIPT+":";return t.style.display="none",html.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(scriptTag("document.F=Object")),e.close(),e.F},NullProtoObject=function(){try{activeXDocument=document.domain&&new ActiveXObject("htmlfile")}catch(e){}NullProtoObject=activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame();for(var e=enumBugKeys.length;e--;)delete NullProtoObject[PROTOTYPE][enumBugKeys[e]];return NullProtoObject()};hiddenKeys[IE_PROTO$1]=!0;var objectCreate=Object.create||function(e,t){var r;return null!==e?(EmptyConstructor[PROTOTYPE]=anObject(e),r=new EmptyConstructor,EmptyConstructor[PROTOTYPE]=null,r[IE_PROTO$1]=e):r=NullProtoObject(),void 0===t?r:objectDefineProperties(r,t)},TO_STRING_TAG=wellKnownSymbol("toStringTag"),test={};test[TO_STRING_TAG]="z";var toStringTagSupport="[object z]"===String(test),TO_STRING_TAG$1=wellKnownSymbol("toStringTag"),CORRECT_ARGUMENTS="Arguments"==classofRaw(function(){return arguments}()),tryGet=function(e,t){try{return e[t]}catch(e){}},classof=toStringTagSupport?classofRaw:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=tryGet(t=Object(e),TO_STRING_TAG$1))?r:CORRECT_ARGUMENTS?classofRaw(t):"Object"==(n=classofRaw(t))&&"function"==typeof t.callee?"Arguments":n},objectToString=toStringTagSupport?{}.toString:function(){return"[object "+classof(this)+"]"},defineProperty=objectDefineProperty.f,TO_STRING_TAG$2=wellKnownSymbol("toStringTag"),setToStringTag=function(e,t,r,n){var o;e&&(o=r?e:e.prototype,has(o,TO_STRING_TAG$2)||defineProperty(o,TO_STRING_TAG$2,{configurable:!0,value:t}),n&&!toStringTagSupport&&createNonEnumerableProperty(o,"toString",objectToString))},iterators={},IteratorPrototype$1=iteratorsCore.IteratorPrototype,returnThis=function(){return this},createIteratorConstructor=function(e,t,r){var n=t+" Iterator";return e.prototype=objectCreate(IteratorPrototype$1,{next:createPropertyDescriptor(1,r)}),setToStringTag(e,n,!1,!0),iterators[n]=returnThis,e},aPossiblePrototype=function(e){if(!isObject(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e},objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var r,n=!1,e={};try{(r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),n=e instanceof Array}catch(e){}return function(e,t){return anObject(e),aPossiblePrototype(t),n?r.call(e,t):e.__proto__=t,e}}():void 0),redefine=function(e,t,r,n){n&&n.enumerable?e[t]=r:createNonEnumerableProperty(e,t,r)},IteratorPrototype$2=iteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS$1=iteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR$1=wellKnownSymbol("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis$1=function(){return this},defineIterator=function(e,t,r,n,o,i,a){createIteratorConstructor(r,t,n);function c(e){if(e===o&&h)return h;if(!BUGGY_SAFARI_ITERATORS$1&&e in d)return d[e];switch(e){case KEYS:case VALUES:case ENTRIES:return function(){return new r(this,e)}}return function(){return new r(this)}}var s,u,l,p=t+" Iterator",f=!1,d=e.prototype,y=d[ITERATOR$1]||d["@@iterator"]||o&&d[o],h=!BUGGY_SAFARI_ITERATORS$1&&y||c(o),g="Array"==t&&d.entries||y;if(g&&(s=objectGetPrototypeOf(g.call(new e)),IteratorPrototype$2!==Object.prototype&&s.next&&(setToStringTag(s,p,!0,!0),iterators[p]=returnThis$1)),o==VALUES&&y&&y.name!==VALUES&&(f=!0,h=function(){return y.call(this)}),a&&d[ITERATOR$1]!==h&&createNonEnumerableProperty(d,ITERATOR$1,h),iterators[t]=h,o)if(u={values:c(VALUES),keys:i?h:c(KEYS),entries:c(ENTRIES)},a)for(l in u)!BUGGY_SAFARI_ITERATORS$1&&!f&&l in d||redefine(d,l,u[l]);else _export({target:t,proto:!0,forced:BUGGY_SAFARI_ITERATORS$1||f},u);return u},charAt=stringMultibyte.charAt,STRING_ITERATOR="String Iterator",setInternalState=internalState.set,getInternalState=internalState.getterFor(STRING_ITERATOR);defineIterator(String,"String",function(e){setInternalState(this,{type:STRING_ITERATOR,string:String(e),index:0})},function(){var e,t=getInternalState(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=charAt(r,n),t.index+=e.length,{value:e,done:!1})});var ARRAY_ITERATOR="Array Iterator",setInternalState$1=internalState.set,getInternalState$1=internalState.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator(Array,"Array",function(e,t){setInternalState$1(this,{type:ARRAY_ITERATOR,target:toIndexedObject(e),index:0,kind:t})},function(){var e=getInternalState$1(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?{value:e.target=void 0,done:!0}:"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}},"values");iterators.Arguments=iterators.Array;var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},TO_STRING_TAG$3=wellKnownSymbol("toStringTag");for(var COLLECTION_NAME in domIterables){var Collection=global_1[COLLECTION_NAME],CollectionPrototype=Collection&&Collection.prototype;CollectionPrototype&&classof(CollectionPrototype)!==TO_STRING_TAG$3&&createNonEnumerableProperty(CollectionPrototype,TO_STRING_TAG$3,COLLECTION_NAME),iterators[COLLECTION_NAME]=iterators.Array}var nativePromiseConstructor=global_1.Promise,redefineAll=function(e,t,r){for(var n in t)r&&r.unsafe&&e[n]?e[n]=t[n]:redefine(e,n,t[n],r);return e},SPECIES=wellKnownSymbol("species"),setSpecies=function(e){var t=getBuiltIn(e),r=objectDefineProperty.f;descriptors&&t&&!t[SPECIES]&&r(t,SPECIES,{configurable:!0,get:function(){return this}})},anInstance=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e},ITERATOR$2=wellKnownSymbol("iterator"),ArrayPrototype=Array.prototype,isArrayIteratorMethod=function(e){return void 0!==e&&(iterators.Array===e||ArrayPrototype[ITERATOR$2]===e)},ITERATOR$3=wellKnownSymbol("iterator"),getIteratorMethod=function(e){if(null!=e)return e[ITERATOR$3]||e["@@iterator"]||iterators[classof(e)]},callWithSafeIterationClosing=function(t,e,r,n){try{return n?e(anObject(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&anObject(o.call(t)),e}},iterate_1=createCommonjsModule(function(e){function d(e,t){this.stopped=e,this.result=t}(e.exports=function(e,t,r,n,o){var i,a,c,s,u,l,p,f=functionBindContext(t,r,n?2:1);if(o)i=e;else{if("function"!=typeof(a=getIteratorMethod(e)))throw TypeError("Target is not iterable");if(isArrayIteratorMethod(a)){for(c=0,s=toLength(e.length);c<s;c++)if((u=n?f(anObject(p=e[c])[0],p[1]):f(e[c]))&&u instanceof d)return u;return new d(!1)}i=a.call(e)}for(l=i.next;!(p=l.call(i)).done;)if("object"==typeof(u=callWithSafeIterationClosing(i,f,p.value,n))&&u&&u instanceof d)return u;return new d(!1)}).stop=function(e){return new d(!0,e)}}),ITERATOR$4=wellKnownSymbol("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$4]=function(){return this},Array.from(iteratorWithReturn,function(){throw 2})}catch(e){}var defer,channel,port,checkCorrectnessOfIteration=function(e,t){if(!t&&!SAFE_CLOSING)return!1;var r=!1;try{var n={};n[ITERATOR$4]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r},SPECIES$1=wellKnownSymbol("species"),speciesConstructor=function(e,t){var r,n=anObject(e).constructor;return void 0===n||null==(r=anObject(n)[SPECIES$1])?t:aFunction(r)},engineUserAgent=getBuiltIn("navigator","userAgent")||"",engineIsIos=/(iphone|ipod|ipad).*applewebkit/i.test(engineUserAgent),location=global_1.location,set$1=global_1.setImmediate,clear=global_1.clearImmediate,process=global_1.process,MessageChannel=global_1.MessageChannel,Dispatch=global_1.Dispatch,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",run=function(e){var t;queue.hasOwnProperty(e)&&(t=queue[e],delete queue[e],t())},runner=function(e){return function(){run(e)}},listener=function(e){run(e.data)},post=function(e){global_1.postMessage(e+"",location.protocol+"//"+location.host)};set$1&&clear||(set$1=function(e){for(var t=[],r=1;r<arguments.length;)t.push(arguments[r++]);return queue[++counter]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},defer(counter),counter},clear=function(e){delete queue[e]},"process"==classofRaw(process)?defer=function(e){process.nextTick(runner(e))}:Dispatch&&Dispatch.now?defer=function(e){Dispatch.now(runner(e))}:MessageChannel&&!engineIsIos?(port=(channel=new MessageChannel).port2,channel.port1.onmessage=listener,defer=functionBindContext(port.postMessage,port,1)):!global_1.addEventListener||"function"!=typeof postMessage||global_1.importScripts||fails(post)||"file:"===location.protocol?defer=ONREADYSTATECHANGE in documentCreateElement("script")?function(e){html.appendChild(documentCreateElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(e)}}:function(e){setTimeout(runner(e),0)}:(defer=post,global_1.addEventListener("message",listener,!1)));var flush,head,last,notify,toggle,node,promise,then,task={set:set$1,clear:clear},getOwnPropertyDescriptor$2=objectGetOwnPropertyDescriptor.f,macrotask=task.set,MutationObserver=global_1.MutationObserver||global_1.WebKitMutationObserver,process$1=global_1.process,Promise$1=global_1.Promise,IS_NODE="process"==classofRaw(process$1),queueMicrotaskDescriptor=getOwnPropertyDescriptor$2(global_1,"queueMicrotask"),queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value;queueMicrotask||(flush=function(){var e,t;for(IS_NODE&&(e=process$1.domain)&&e.exit();head;){t=head.fn,head=head.next;try{t()}catch(e){throw head?notify():last=void 0,e}}last=void 0,e&&e.enter()},notify=IS_NODE?function(){process$1.nextTick(flush)}:MutationObserver&&!engineIsIos?(toggle=!0,node=document.createTextNode(""),new MutationObserver(flush).observe(node,{characterData:!0}),function(){node.data=toggle=!toggle}):Promise$1&&Promise$1.resolve?(promise=Promise$1.resolve(void 0),then=promise.then,function(){then.call(promise,flush)}):function(){macrotask.call(global_1,flush)});var match,version,microtask=queueMicrotask||function(e){var t={fn:e,next:void 0};last&&(last.next=t),head||(head=t,notify()),last=t},PromiseCapability=function(e){var r,n;this.promise=new e(function(e,t){if(void 0!==r||void 0!==n)throw TypeError("Bad Promise constructor");r=e,n=t}),this.resolve=aFunction(r),this.reject=aFunction(n)},f$3=function(e){return new PromiseCapability(e)},newPromiseCapability={f:f$3},promiseResolve=function(e,t){if(anObject(e),isObject(t)&&t.constructor===e)return t;var r=newPromiseCapability.f(e);return(0,r.resolve)(t),r.promise},hostReportErrors=function(e,t){var r=global_1.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))},perform=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},process$2=global_1.process,versions=process$2&&process$2.versions,v8=versions&&versions.v8;v8?version=(match=v8.split("."))[0]+match[1]:engineUserAgent&&(!(match=engineUserAgent.match(/Edge\/(\d+)/))||74<=match[1])&&(match=engineUserAgent.match(/Chrome\/(\d+)/))&&(version=match[1]);var Internal,OwnPromiseCapability,PromiseWrapper,engineV8Version=version&&+version,task$1=task.set,SPECIES$2=wellKnownSymbol("species"),PROMISE="Promise",getInternalState$2=internalState.get,setInternalState$2=internalState.set,getInternalPromiseState=internalState.getterFor(PROMISE),PromiseConstructor=nativePromiseConstructor,TypeError$1=global_1.TypeError,document$2=global_1.document,process$3=global_1.process,$fetch=getBuiltIn("fetch"),newPromiseCapability$1=newPromiseCapability.f,newGenericPromiseCapability=newPromiseCapability$1,IS_NODE$1="process"==classofRaw(process$3),DISPATCH_EVENT=!!(document$2&&document$2.createEvent&&global_1.dispatchEvent),UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,FORCED=isForced_1(PROMISE,function(){if(!(inspectSource(PromiseConstructor)!==String(PromiseConstructor))){if(66===engineV8Version)return!0;if(!IS_NODE$1&&"function"!=typeof PromiseRejectionEvent)return!0}if(!PromiseConstructor.prototype.finally)return!0;if(51<=engineV8Version&&/native code/.test(PromiseConstructor))return!1;function e(e){e(function(){},function(){})}var t=PromiseConstructor.resolve(1);return(t.constructor={})[SPECIES$2]=e,!(t.then(function(){})instanceof e)}),INCORRECT_ITERATION=FORCED||!checkCorrectnessOfIteration(function(e){PromiseConstructor.all(e).catch(function(){})}),isThenable=function(e){var t;return!(!isObject(e)||"function"!=typeof(t=e.then))&&t},notify$1=function(p,f,d){var y;f.notified||(f.notified=!0,y=f.reactions,microtask(function(){for(var e=f.value,t=f.state==FULFILLED,r=0;y.length>r;){var n,o,i,a=y[r++],c=t?a.ok:a.fail,s=a.resolve,u=a.reject,l=a.domain;try{c?(t||(f.rejection===UNHANDLED&&onHandleUnhandled(p,f),f.rejection=HANDLED),!0===c?n=e:(l&&l.enter(),n=c(e),l&&(l.exit(),i=!0)),n===a.promise?u(TypeError$1("Promise-chain cycle")):(o=isThenable(n))?o.call(n,s,u):s(n)):u(e)}catch(e){l&&!i&&l.exit(),u(e)}}f.reactions=[],f.notified=!1,d&&!f.rejection&&onUnhandled(p,f)}))},dispatchEvent=function(e,t,r){var n,o;DISPATCH_EVENT?((n=document$2.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),global_1.dispatchEvent(n)):n={promise:t,reason:r},(o=global_1["on"+e])?o(n):e===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",r)},onUnhandled=function(r,n){task$1.call(global_1,function(){var e,t=n.value;if(isUnhandled(n)&&(e=perform(function(){IS_NODE$1?process$3.emit("unhandledRejection",t,r):dispatchEvent(UNHANDLED_REJECTION,r,t)}),n.rejection=IS_NODE$1||isUnhandled(n)?UNHANDLED:HANDLED,e.error))throw e.value})},isUnhandled=function(e){return e.rejection!==HANDLED&&!e.parent},onHandleUnhandled=function(e,t){task$1.call(global_1,function(){IS_NODE$1?process$3.emit("rejectionHandled",e):dispatchEvent(REJECTION_HANDLED,e,t.value)})},bind=function(t,r,n,o){return function(e){t(r,n,e,o)}},internalReject=function(e,t,r,n){t.done||(t.done=!0,n&&(t=n),t.value=r,t.state=REJECTED,notify$1(e,t,!0))},internalResolve=function(r,n,e,t){if(!n.done){n.done=!0,t&&(n=t);try{if(r===e)throw TypeError$1("Promise can't be resolved itself");var o=isThenable(e);o?microtask(function(){var t={done:!1};try{o.call(e,bind(internalResolve,r,t,n),bind(internalReject,r,t,n))}catch(e){internalReject(r,t,e,n)}}):(n.value=e,n.state=FULFILLED,notify$1(r,n,!1))}catch(e){internalReject(r,{done:!1},e,n)}}};FORCED&&(PromiseConstructor=function(e){anInstance(this,PromiseConstructor,PROMISE),aFunction(e),Internal.call(this);var t=getInternalState$2(this);try{e(bind(internalResolve,this,t),bind(internalReject,this,t))}catch(e){internalReject(this,t,e)}},(Internal=function(){setInternalState$2(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:PENDING,value:void 0})}).prototype=redefineAll(PromiseConstructor.prototype,{then:function(e,t){var r=getInternalPromiseState(this),n=newPromiseCapability$1(speciesConstructor(this,PromiseConstructor));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=IS_NODE$1?process$3.domain:void 0,r.parent=!0,r.reactions.push(n),r.state!=PENDING&&notify$1(this,r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),OwnPromiseCapability=function(){var e=new Internal,t=getInternalState$2(e);this.promise=e,this.resolve=bind(internalResolve,e,t),this.reject=bind(internalReject,e,t)},newPromiseCapability.f=newPromiseCapability$1=function(e){return e===PromiseConstructor||e===PromiseWrapper?new OwnPromiseCapability(e):newGenericPromiseCapability(e)}),_export({global:!0,wrap:!0,forced:FORCED},{Promise:PromiseConstructor}),setToStringTag(PromiseConstructor,PROMISE,!1,!0),setSpecies(PROMISE),PromiseWrapper=getBuiltIn(PROMISE),_export({target:PROMISE,stat:!0,forced:FORCED},{reject:function(e){var t=newPromiseCapability$1(this);return t.reject.call(void 0,e),t.promise}}),_export({target:PROMISE,stat:!0,forced:isPure},{resolve:function(e){return promiseResolve(this===PromiseWrapper?PromiseConstructor:this,e)}}),_export({target:PROMISE,stat:!0,forced:INCORRECT_ITERATION},{all:function(e){var c=this,t=newPromiseCapability$1(c),s=t.resolve,u=t.reject,r=perform(function(){var n=aFunction(c.resolve),o=[],i=0,a=1;iterate_1(e,function(e){var t=i++,r=!1;o.push(void 0),a++,n.call(c,e).then(function(e){r||(r=!0,o[t]=e,--a||s(o))},u)}),--a||s(o)});return r.error&&u(r.value),t.promise},race:function(e){var r=this,n=newPromiseCapability$1(r),o=n.reject,t=perform(function(){var t=aFunction(r.resolve);iterate_1(e,function(e){t.call(r,e).then(n.resolve,o)})});return t.error&&o(t.value),n.promise}}),_export({target:"Promise",stat:!0},{allSettled:function(e){var c=this,t=newPromiseCapability.f(c),s=t.resolve,r=t.reject,n=perform(function(){var n=aFunction(c.resolve),o=[],i=0,a=1;iterate_1(e,function(e){var t=i++,r=!1;o.push(void 0),a++,n.call(c,e).then(function(e){r||(r=!0,o[t]={status:"fulfilled",value:e},--a||s(o))},function(e){r||(r=!0,o[t]={status:"rejected",reason:e},--a||s(o))})}),--a||s(o)});return n.error&&r(n.value),t.promise}});var NON_GENERIC=!!nativePromiseConstructor&&fails(function(){nativePromiseConstructor.prototype.finally.call({then:function(){}},function(){})});_export({target:"Promise",proto:!0,real:!0,forced:NON_GENERIC},{finally:function(t){var r=speciesConstructor(this,getBuiltIn("Promise")),e="function"==typeof t;return this.then(e?function(e){return promiseResolve(r,t()).then(function(){return e})}:t,e?function(e){return promiseResolve(r,t()).then(function(){throw e})}:t)}}),getCjsExportFromNamespace(es_object_toString);var promise$1=path.Promise,setInternalState$3=internalState.set,getInternalAggregateErrorState=internalState.getterFor("AggregateError"),$AggregateError=function(e,t){var r=this;if(!(r instanceof $AggregateError))return new $AggregateError(e,t);objectSetPrototypeOf&&(r=objectSetPrototypeOf(new Error(t),objectGetPrototypeOf(r)));var n=[];return iterate_1(e,n.push,n),descriptors?setInternalState$3(r,{errors:n,type:"AggregateError"}):r.errors=n,void 0!==t&&createNonEnumerableProperty(r,"message",String(t)),r};$AggregateError.prototype=objectCreate(Error.prototype,{constructor:createPropertyDescriptor(5,$AggregateError),message:createPropertyDescriptor(5,""),name:createPropertyDescriptor(5,"AggregateError")}),descriptors&&objectDefineProperty.f($AggregateError.prototype,"errors",{get:function(){return getInternalAggregateErrorState(this).errors},configurable:!0}),_export({global:!0},{AggregateError:$AggregateError}),_export({target:"Promise",stat:!0},{try:function(e){var t=newPromiseCapability.f(this),r=perform(e);return(r.error?t.reject:t.resolve)(r.value),t.promise}});var PROMISE_ANY_ERROR="No one promise resolved";_export({target:"Promise",stat:!0},{any:function(e){var s=this,t=newPromiseCapability.f(s),u=t.resolve,l=t.reject,r=perform(function(){var n=aFunction(s.resolve),o=[],i=0,a=1,c=!1;iterate_1(e,function(e){var t=i++,r=!1;o.push(void 0),a++,n.call(s,e).then(function(e){r||c||(c=!0,u(e))},function(e){r||c||(r=!0,o[t]=e,--a||l(new(getBuiltIn("AggregateError"))(o,PROMISE_ANY_ERROR)))})}),--a||l(new(getBuiltIn("AggregateError"))(o,PROMISE_ANY_ERROR))});return r.error&&l(r.value),t.promise}});var promise$2=promise$1,promise$3=promise$1,runtime_1=createCommonjsModule(function(e){var t=function(a){var p,e=Object.prototype,l=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function c(e,t,r,n){var i,a,c,s,o=t&&t.prototype instanceof v?t:v,u=Object.create(o.prototype),l=new w(n||[]);return u._invoke=(i=e,a=r,c=l,s=d,function(e,t){if(s===h)throw new Error("Generator is already running");if(s===g){if("throw"===e)throw t;return A()}for(c.method=e,c.arg=t;;){var r=c.delegate;if(r){var n=function e(t,r){var n=t.iterator[r.method];if(n===p){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=p,e(t,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=f(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=p),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}(r,c);if(n){if(n===m)continue;return n}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(s===d)throw s=g,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);s=h;var o=f(i,a,c);if("normal"===o.type){if(s=c.done?g:y,o.arg===m)continue;return{value:o.arg,done:c.done}}"throw"===o.type&&(s=g,c.method="throw",c.arg=o.arg)}}),u}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=c;var d="suspendedStart",y="suspendedYield",h="executing",g="completed",m={};function v(){}function i(){}function s(){}var u={};u[o]=function(){return this};var b=Object.getPrototypeOf,E=b&&b(b(_([])));E&&E!==e&&l.call(E,o)&&(u=E);var S=s.prototype=v.prototype=Object.create(u);function O(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function I(s,u){var t;this._invoke=function(r,n){function e(){return new u(function(e,t){!function t(e,r,n,o){var i=f(s[e],s,r);if("throw"!==i.type){var a=i.arg,c=a.value;return c&&"object"==typeof c&&l.call(c,"__await")?u.resolve(c.__await).then(function(e){t("next",e,n,o)},function(e){t("throw",e,n,o)}):u.resolve(c).then(function(e){a.value=e,n(a)},function(e){return t("throw",e,n,o)})}o(i.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(l.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=p,e.done=!0,e};return n.next=n}}return{next:A}}function A(){return{value:p,done:!0}}return i.prototype=S.constructor=s,s.constructor=i,s[n]=i.displayName="GeneratorFunction",a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,n in e||(e[n]="GeneratorFunction")),e.prototype=Object.create(S),e},a.awrap=function(e){return{__await:e}},O(I.prototype),I.prototype[r]=function(){return this},a.AsyncIterator=I,a.async=function(e,t,r,n,o){void 0===o&&(o=Promise);var i=new I(c(e,t,r,n),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},O(S),S[n]="Generator",S[o]=function(){return this},S.toString=function(){return"[object Generator]"},a.keys=function(r){var n=[];for(var e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=_,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=p)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return i.type="throw",i.arg=r,n.next=e,t&&(n.method="next",n.arg=p),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=l.call(o,"catchLoc"),c=l.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&l.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n,o=r.completion;return"throw"===o.type&&(n=o.arg,P(r)),n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:_(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=p),m}},a}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}),regenerator=runtime_1;function asyncGeneratorStep(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):promise$3.resolve(s).then(n,o)}function _asyncToGenerator(c){return function(){var e=this,a=arguments;return new promise$3(function(t,r){var n=c.apply(e,a);function o(e){asyncGeneratorStep(n,t,r,o,i,"next",e)}function i(e){asyncGeneratorStep(n,t,r,o,i,"throw",e)}o(void 0)})}}var isArray=Array.isArray||function(e){return"Array"==classofRaw(e)},createProperty=function(e,t,r){var n=toPrimitive(t);n in e?objectDefineProperty.f(e,n,createPropertyDescriptor(0,r)):e[n]=r},SPECIES$3=wellKnownSymbol("species"),arraySpeciesCreate=function(e,t){var r;return isArray(e)&&("function"==typeof(r=e.constructor)&&(r===Array||isArray(r.prototype))||isObject(r)&&null===(r=r[SPECIES$3]))&&(r=void 0),new(void 0===r?Array:r)(0===t?0:t)},SPECIES$4=wellKnownSymbol("species"),arrayMethodHasSpeciesSupport=function(t){return 51<=engineV8Version||!fails(function(){var e=[];return(e.constructor={})[SPECIES$4]=function(){return{foo:1}},1!==e[t](Boolean).foo})},IS_CONCAT_SPREADABLE=wellKnownSymbol("isConcatSpreadable"),MAX_SAFE_INTEGER=9007199254740991,MAXIMUM_ALLOWED_INDEX_EXCEEDED="Maximum allowed index exceeded",IS_CONCAT_SPREADABLE_SUPPORT=51<=engineV8Version||!fails(function(){var e=[];return e[IS_CONCAT_SPREADABLE]=!1,e.concat()[0]!==e}),SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("concat"),isConcatSpreadable=function(e){if(!isObject(e))return!1;var t=e[IS_CONCAT_SPREADABLE];return void 0!==t?!!t:isArray(e)},FORCED$1=!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT;_export({target:"Array",proto:!0,forced:FORCED$1},{concat:function(e){for(var t,r,n,o=toObject(this),i=arraySpeciesCreate(o,0),a=0,c=-1,s=arguments.length;c<s;c++)if(isConcatSpreadable(n=-1===c?o:arguments[c])){if(r=toLength(n.length),MAX_SAFE_INTEGER<a+r)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);for(t=0;t<r;t++,a++)t in n&&createProperty(i,a,n[t])}else{if(MAX_SAFE_INTEGER<=a)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);createProperty(i,a++,n)}return i.length=a,i}});var entryVirtual=function(e){return path[e+"Prototype"]},concat=entryVirtual("Array").concat,ArrayPrototype$1=Array.prototype,concat_1=function(e){var t=e.concat;return e===ArrayPrototype$1||e instanceof Array&&t===ArrayPrototype$1.concat?concat:t},concat$1=concat_1,concat$2=concat_1,constraints=window.constraints={audio:!1,video:!0};function handleSuccess(e,t){var r=t,n=e.getVideoTracks();console.log("Got stream with constraints:",constraints),console.log("Using video device: ".concat(n[0].label)),r.srcObject=e}function handleError(e){var t,r;"ConstraintNotSatisfiedError"===e.name?(r=constraints.video,errorMsg(concat$2(t="The resolution ".concat(r.width.exact,"x")).call(t,r.height.exact," px is not supported by your device."))):"PermissionDeniedError"===e.name&&errorMsg("Permissions have not been granted to use your camera and microphone, you need to allow the page access to your devices in order for the demo to work."),errorMsg("getUserMedia error: ".concat(e.name),e)}function errorMsg(e,t){document.querySelector("#errorMsg").innerHTML+="<p>".concat(e,"</p>"),void 0!==t&&console.error(t)}function openRTC(e){return _openRTC.apply(this,arguments)}function _openRTC(){return(_openRTC=_asyncToGenerator(regenerator.mark(function e(t){var r;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia(constraints);case 3:return handleSuccess(r=e.sent,t),e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),handleError(e.t0),e.abrupt("return",promise$3.reject(e.t0));case 12:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}var slice=[].slice,MSIE=/MSIE .\./.test(engineUserAgent),wrap=function(o){return function(e,t){var r=2<arguments.length,n=r?slice.call(arguments,2):void 0;return o(r?function(){("function"==typeof e?e:Function(e)).apply(this,n)}:e,t)}};_export({global:!0,bind:!0,forced:MSIE},{setTimeout:wrap(global_1.setTimeout),setInterval:wrap(global_1.setInterval)});var setInterval=path.setInterval,setInterval$1=setInterval,setInterval$2=setInterval;function RTCRecord(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=null,i=n.collectTime||1e3,a={mimeType:"video/webm;codecs=vp9"},c=null;function s(e){e.data&&0<e.data.size&&t&&t(e.data)}return o=e,r={mimeType:"video/webm;codecs=vp9"},MediaRecorder.isTypeSupported(r.mimeType)||(console.error("".concat(r.mimeType," is not Supported")),r={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(r.mimeType)||(console.error("".concat(r.mimeType," is not Supported")),r={mimeType:"video/webm"},MediaRecorder.isTypeSupported(r.mimeType)||(console.error("".concat(r.mimeType," is not Supported")),r={mimeType:""}))),a=r,function(){try{c=new MediaRecorder(o,a)}catch(e){return console.error("Exception while creating MediaRecorder:",e)}c.onstop=function(e){c=null,n.ended&&n.ended()},c.ondataavailable=s,c.start(i)}(),e.onended=function(){e=o=null},c}function CanvasRecord(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=null,o=e.videoHeight||e.clientHeight,i=e.videoWidth||e.clientWidth,a={ondataavailable:function(){},onstop:function(){},stop:p,start:function(){e.play()}};e.addEventListener("canplay",u,!1),e.addEventListener("ended",l,!1);var c=document.createElement("canvas");function s(){var t=c.getContext("2d");t.drawImage(e,0,0,o,i),c.toBlob(function(e){a.ondataavailable(e,t)},"image/webp")}function u(){s(),n=setInterval$2(function(){s()},r.duration||200)}function l(){p(),a.onstop(),console.log("视频录制结束!")}function p(){n&&clearInterval(n),e.removeEventListener("canplay",u,!1),e.removeEventListener("ended",l,!1),c=null}return c.style.display="none",c.setAttribute("height",o),c.setAttribute("width",i),a}function record(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return"undefined"!=typeof MediaRecorder?RTCRecord(e,r,n):CanvasRecord(t,r,n)}var getVideoByInput=null;function getInput(){if(getVideoByInput)return getVideoByInput;var e=document.createElement("input");return(getVideoByInput=e).setAttribute("type","file"),e.setAttribute("accept","video/*"),e.setAttribute("capture","user"),e.style.display="none",document.body.append(e),e}function getVideo(){var e=getInput();return new promise$3(function(t){e.onchange=function(e){t(e.target.files[0])},e.click()})}var f$4=Object.getOwnPropertySymbols,objectGetOwnPropertySymbols={f:f$4},nativeAssign=Object.assign,defineProperty$1=Object.defineProperty,objectAssign=!nativeAssign||fails(function(){if(descriptors&&1!==nativeAssign({b:1},nativeAssign(defineProperty$1({},"a",{enumerable:!0,get:function(){defineProperty$1(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=nativeAssign({},e)[r]||objectKeys(nativeAssign({},t)).join("")!=n})?function(e,t){for(var r=toObject(e),n=arguments.length,o=1,i=objectGetOwnPropertySymbols.f,a=objectPropertyIsEnumerable.f;o<n;)for(var c,s=indexedObject(arguments[o++]),u=i?objectKeys(s).concat(i(s)):objectKeys(s),l=u.length,p=0;p<l;)c=u[p++],descriptors&&!a.call(s,c)||(r[c]=s[c]);return r}:nativeAssign;_export({target:"Object",stat:!0,forced:Object.assign!==objectAssign},{assign:objectAssign});var assign=path.Object.assign,assign$1=assign,assign$2=assign,config={width:450,height:450,duration:100,MAXTIME:15,MINSIZE:1048576},URL=window.URL||window.webkitURL;function createPlayVideo(){var e=document.createElement("video");return e.setAttribute("width",config.width),e.setAttribute("height",config.height),e.style.width=config.width,e.style.height=config.height,e.style.visibility="hidden",e.style.position="fixed",e.style.zIndex=-99999,e.muted=!0,document.body.append(e),e}function getFileURL(r){var e=URL.createObjectURL;return e?e(r):new promise$3(function(e){var t=new FileReader;t.readAsDataURL(r),t.onload=function(){e(t.result)}})}function pressVideo(e,t,r){return _pressVideo.apply(this,arguments)}function _pressVideo(){return(_pressVideo=_asyncToGenerator(regenerator.mark(function e(t,r,n){var o,i;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n&&assign$2(config,n),o=createPlayVideo(),t.size<config.MINSIZE)return console.info("视频小于".concat(config.MINSIZE,", 不做处理")),r&&r(t),e.abrupt("return",t);e.next=7;break;case 7:return o.onloadedmetadata=function(){var e;if(o.duration>config.MAXTIME)throw URL.revokeObjectURL(o.src),i.stop(),new Error(concat$2(e="视频时长".concat(o.duration,"超过")).call(e,config.MAXTIME))},e.next=10,getFileURL(t);case 10:return o.src=e.sent,(i=CanvasRecord(o,r,n)).ondataavailable=r,i.onstop=function(){document.body.removeChild(o),o=null,config.ended&&config.ended()},i.start(),e.abrupt("return",i);case 18:return e.prev=18,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",promise$3.reject(e.t0));case 22:case"end":return e.stop()}},e,null,[[0,18]])}))).apply(this,arguments)}function webrtcSurport(){return!!navigator.mediaDevices.getUserMedia}function getDOM(e){return"string"==typeof e?document.querySelector(e):e}function degrade(e){return _degrade.apply(this,arguments)}function _degrade(){return(_degrade=_asyncToGenerator(regenerator.mark(function e(t){var r,n;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,getVideo();case 2:return r=e.sent,e.next=5,pressVideo(r,t.chunks,t);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function openVideo(e){return _openVideo.apply(this,arguments)}function _openVideo(){return(_openVideo=_asyncToGenerator(regenerator.mark(function e(t){var r,n,o,i;return regenerator.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(webrtcSurport())return e.next=4,openRTC(t.video);e.next=9;break;case 4:return r=e.sent,n=record(r,t.video,t.chunks,t),e.abrupt("return",{stop:function(){r.getTracks()[0].stop(),n.stop()}});case 9:if(t.degrade){e.next=11;break}return e.abrupt("return",promise$3.reject({isWebrtcSurport:!1}));case 11:if(!0===t.degrade)return e.abrupt("return",degrade(t));e.next=13;break;case 13:if(t.degrade)return o=null,i=new promise$3(function(e){return o=e}),getDOM(t.degrade).addEventListener("click",function(){degrade(t).then(o)}),e.abrupt("return",i);e.next=18;break;case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}exports.openVideo=openVideo,exports.webrtcSurport=webrtcSurport;
